<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>eXeLearning Style Converter v2.9 ‚Üí v3.0</title>

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="./styles/app.css">
</head>
<body>
    <div class="container-fluid">
        <!-- Header -->
        <header class="py-4 mb-4 border-bottom">
            <div class="container">
                <h1 class="display-5 fw-bold text-primary">
                    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="currentColor" class="bi bi-arrow-left-right me-2" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M1 11.5a.5.5 0 0 0 .5.5h11.793l-3.147 3.146a.5.5 0 0 0 .708.708l4-4a.5.5 0 0 0 0-.708l-4-4a.5.5 0 0 0-.708.708L13.293 11H1.5a.5.5 0 0 0-.5.5m14-7a.5.5 0 0 1-.5.5H2.707l3.147 3.146a.5.5 0 1 1-.708.708l-4-4a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 4H14.5a.5.5 0 0 1 .5.5"/>
                    </svg>
                    eXeLearning Style Converter
                </h1>
                <p class="lead text-muted">Convert your styles from v2.9 to v3.0 in the browser</p>
            </div>
        </header>

        <div class="container">
            <!-- Experimental Warning -->
            <div class="alert alert-warning alert-dismissible fade show" role="alert">
                <h5 class="alert-heading">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-exclamation-triangle-fill me-2" viewBox="0 0 16 16">
                        <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5m.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2"/>
                    </svg>
                    Experimental Tool
                </h5>
                <p class="mb-0">
                    <strong>Please note:</strong> This is an experimental converter. The converted styles may not work perfectly and will likely require manual adjustments.
                    However, it provides a good starting point for migrating your styles to eXeLearning 3.0.
                </p>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>

            <div class="row">
                <!-- Left Column: Upload and Controls -->
                <div class="col-lg-5">
                    <div class="card shadow-sm mb-4">
                        <div class="card-header bg-primary text-white">
                            <h5 class="mb-0">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-upload me-2" viewBox="0 0 16 16">
                                    <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"/>
                                    <path d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708z"/>
                                </svg>
                                Upload Old Style (v2.9)
                            </h5>
                        </div>
                        <div class="card-body">
                            <!-- Tab navigation -->
                            <ul class="nav nav-tabs mb-3" role="tablist">
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link active" id="folder-tab" data-bs-toggle="tab" data-bs-target="#folder-panel" type="button" role="tab">
                                        üìÅ Folder
                                    </button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="zip-tab" data-bs-toggle="tab" data-bs-target="#zip-panel" type="button" role="tab">
                                        üì¶ ZIP File
                                    </button>
                                </li>
                            </ul>

                            <!-- Tab content -->
                            <div class="tab-content">
                                <!-- Folder upload tab -->
                                <div class="tab-pane fade show active" id="folder-panel" role="tabpanel">
                                    <div class="mb-3">
                                        <label for="dirInput" class="form-label">Select style folder:</label>
                                        <input type="file" id="dirInput" class="form-control" webkitdirectory directory multiple>
                                        <div class="form-text">
                                            Choose the folder containing your v2.9 style files
                                        </div>
                                    </div>
                                </div>

                                <!-- ZIP upload tab -->
                                <div class="tab-pane fade" id="zip-panel" role="tabpanel">
                                    <div class="mb-3">
                                        <label for="zipInput" class="form-label">Select ZIP file:</label>
                                        <input type="file" id="zipInput" class="form-control" accept=".zip">
                                        <div class="form-text">
                                            Choose a ZIP file containing your v2.9 style
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div id="fileInfo" class="alert alert-info d-none">
                                <strong id="fileCount"></strong>
                                <div id="styleName" class="mt-1"></div>
                            </div>

                            <hr>

                            <div class="form-check mb-3">
                                <input class="form-check-input" type="checkbox" id="createZip" checked>
                                <label class="form-check-label" for="createZip">
                                    Create ZIP file for eXeLearning 3.0 import
                                </label>
                            </div>

                            <button id="convertBtn" class="btn btn-success btn-lg w-100" disabled>
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-gear-fill me-2" viewBox="0 0 16 16">
                                    <path d="M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z"/>
                                </svg>
                                Convert Style
                            </button>

                            <div id="loadingSpinner" class="text-center mt-3 d-none">
                                <div class="spinner-border text-primary" role="status">
                                    <span class="visually-hidden">Converting...</span>
                                </div>
                                <p class="mt-2 text-muted">Converting... Please wait</p>
                            </div>
                        </div>
                    </div>

                    <!-- Info Card -->
                    <div class="card shadow-sm">
                        <div class="card-header bg-info text-white">
                            <h6 class="mb-0">‚ÑπÔ∏è How it works</h6>
                        </div>
                        <div class="card-body small">
                            <ol class="mb-0">
                                <li>Upload your v2.9 style folder</li>
                                <li>Click "Convert Style"</li>
                                <li>Watch the conversion progress</li>
                                <li>Download the ZIP file</li>
                                <li>Import it into eXeLearning 3.0</li>
                            </ol>
                        </div>
                    </div>
                </div>

                <!-- Right Column: Console Output -->
                <div class="col-lg-7">
                    <div class="card shadow-sm">
                        <div class="card-header bg-dark text-white">
                            <h5 class="mb-0">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-terminal me-2" viewBox="0 0 16 16">
                                    <path d="M6 9a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3A.5.5 0 0 1 6 9M3.854 4.146a.5.5 0 1 0-.708.708L4.793 6.5 3.146 8.146a.5.5 0 1 0 .708.708l2-2a.5.5 0 0 0 0-.708z"/>
                                    <path d="M2 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2zm12 1a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1z"/>
                                </svg>
                                Console Output
                            </h5>
                        </div>
                        <div class="card-body p-0">
                            <div id="console-output"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="mt-5 py-3 border-top bg-light">
            <div class="container text-center text-muted small">
                <p class="mb-1">eXeLearning Style Converter v1.0</p>
                <p class="mb-0">
                    <a href="https://github.com/exelearning/exelearning-style-converter" target="_blank" class="text-decoration-none">
                        View on GitHub
                    </a>
                </p>
            </div>
        </footer>
    </div>

    <!-- Bootstrap 5 JS Bundle (includes Popper) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Main JavaScript -->
    <script type="module" src="./src/main.js"></script>
</body>
</html>
